{"version":3,"sources":["webpack:///./src/views/login/index.vue?c1ec","webpack:///./src/views/login/index.vue?a6ae","webpack:///src/views/login/index.vue","webpack:///./src/views/login/index.vue?e0c5","webpack:///./src/views/login/index.vue","webpack:///./src/api/user.js","webpack:///./src/assets/2020-01-08_195351.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","push","slot","ref","model","value","user","callback","$$v","$set","expression","phoneCode","onclick","_v","register","_m","staticRenderFns","name","components","props","data","mobile","code","computed","watch","created","methods","component","login","request","method","url","gaincode","getUserInfo","getuserId","userId","addFollow","target","deleteFollow","getUserProfile","updateUserPhoto","updateUserProfile","module","exports"],"mappings":"yIAAA,yBAA2jB,EAAG,G,2CCA9jB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,UAAU,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,SAASC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIU,QAAQC,KAAK,OAAOC,KAAK,UAAU,GAAGR,EAAG,qBAAqB,CAACS,IAAI,QAAQ,CAACT,EAAG,qBAAqB,CAACG,MAAM,CAAC,KAAO,MAAM,MAAQ,kBAAkB,UAAY,KAAK,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,UAAY,GAAG,YAAY,UAAU,YAAc,UAAUO,MAAM,CAACC,MAAOf,EAAIgB,KAAW,OAAEC,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIgB,KAAM,SAAUE,IAAME,WAAW,kBAAkB,GAAGhB,EAAG,qBAAqB,CAACG,MAAM,CAAC,KAAO,MAAM,MAAQ,gBAAgB,UAAY,KAAK,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,OAAS,GAAG,YAAY,kBAAkB,YAAc,YAAYO,MAAM,CAACC,MAAOf,EAAIgB,KAAS,KAAEC,SAAS,SAAUC,GAAMlB,EAAImB,KAAKnB,EAAIgB,KAAM,OAAQE,IAAME,WAAW,cAAc,CAAEpB,EAAa,UAAEI,EAAG,iBAAiB,CAACG,MAAM,CAAC,KAAO,SAAS,KAAO,IAAU,OAAS,QAAQC,GAAG,CAAC,OAAS,SAASC,GAAQT,EAAIqB,WAAU,IAAQT,KAAK,WAAWR,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,SAAS,KAAO,QAAQ,MAAQ,GAAG,KAAO,WAAWC,GAAG,CAAC,MAAQR,EAAIsB,SAASV,KAAK,UAAU,CAACZ,EAAIuB,GAAG,YAAY,IAAI,IAAI,GAAGnB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,aAAa,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,QAAQC,GAAG,CAAC,MAAQR,EAAIwB,WAAW,CAACxB,EAAIuB,GAAG,SAAS,GAAGvB,EAAIyB,GAAG,GAAGzB,EAAIyB,GAAG,IAAI,IACh4CC,EAAkB,CAAC,WAAa,IAAI1B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAM,EAAQ,QAAsC,IAAM,SAAS,WAAa,IAAIP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACJ,EAAIuB,GAAG,iBAAiBnB,EAAG,OAAO,CAACJ,EAAIuB,GAAG,a,oEC4BjW,GACEI,KAAM,YACNC,WAAY,GACZC,MAAO,GACPC,KAJF,WAKI,MAAO,CACLd,KAAM,CACJe,OAAQ,GACRC,KAAM,IAERX,WAAW,IAGfY,SAAU,GACVC,MAAO,GACPC,QAfF,aAgBEC,QAAS,CACP,SADJ,qLAEA,2BAFA,UAEA,EAFA,OAIA,EAJA,iBAKA,yBALA,6BAMA,GANA,iDAMA,EANA,WAOA,QAEA,KATA,wBAUA,kBAVA,yDAeA,qBACA,WACA,eACA,mBAlBA,oBAqBA,0BArBA,QAqBA,EArBA,OAuBA,2CACA,4BACA,uBAzBA,sDA4BA,yBA5BA,mHA+BI,QA/BJ,+KAiCA,mBAjCA,SAkCA,oCACA,aAnCA,UAkCA,EAlCA,OAsCA,QAtCA,uBAuCA,yBAvCA,iCA0CA,kBA1CA,UA2CA,kBA3CA,QA4CA,gCA5CA,wDA+CA,kBACA,2BAhDA,wBAiDA,sBAjDA,2BAoDA,oBApDA,oHC7C8V,I,wBCQ1VC,EAAY,eACd,EACAtC,EACA2B,GACA,EACA,KACA,WACA,MAIa,aAAAW,E,2CCnBf,kUAEaC,EAAQ,SAAAR,GACnB,OAAOS,eAAQ,CACbC,OAAQ,OACRC,IAAK,2BACLX,UAGSY,EAAW,SAAAZ,GACtB,OAAOS,eAAQ,CACbC,OAAQ,MACRC,IAAK,uBAAF,OAAyBX,MAGnBa,EAAc,WACzB,OAAOJ,eAAQ,CACbC,OAAQ,MACRC,IAAK,oBAGIG,EAAY,SAACC,GACxB,OAAON,eAAQ,CACbE,IAAK,mBAAF,OAAqBI,GACxBL,OAAQ,SAGCM,EAAY,SAAAD,GACvB,OAAON,eAAQ,CACbC,OAAQ,OACRC,IAAK,4BACLX,KAAM,CACJiB,OAAQF,MAKDG,EAAe,SAAAH,GAC1B,OAAON,eAAQ,CACbC,OAAQ,SACRC,IAAK,6BAAF,OAA+BI,MAIzBI,EAAiB,WAC5B,OAAOV,eAAQ,CACbC,OAAQ,MACRC,IAAK,4BAIIS,EAAkB,SAAApB,GAC7B,OAAOS,eAAQ,CACbC,OAAQ,QACRC,IAAK,uBACLX,UAISqB,EAAoB,SAAArB,GAC/B,OAAOS,eAAQ,CACbC,OAAQ,QACRC,IAAK,yBACLX,W,qBC/DJsB,EAAOC,QAAU,IAA0B","file":"js/chunk-cf14b9c6.5b2deb3e.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=34f594d4&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=34f594d4&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('van-nav-bar',{attrs:{\"title\":\"登录/注册\"}},[_c('van-icon',{attrs:{\"slot\":\"left\",\"name\":\"cross\"},on:{\"click\":function($event){return _vm.$router.push('/')}},slot:\"left\"})],1),_c('ValidationObserver',{ref:\"form\"},[_c('ValidationProvider',{attrs:{\"name\":\"手机号\",\"rules\":\"required|mobile\",\"immediate\":\"\"}},[_c('van-field',{attrs:{\"clearable\":\"\",\"left-icon\":\"graphic\",\"placeholder\":\"请输入手机号\"},model:{value:(_vm.user.mobile),callback:function ($$v) {_vm.$set(_vm.user, \"mobile\", $$v)},expression:\"user.mobile\"}})],1),_c('ValidationProvider',{attrs:{\"name\":\"验证码\",\"rules\":\"required|code\",\"immediate\":\"\"}},[_c('van-field',{attrs:{\"center\":\"\",\"left-icon\":\"smile-comment-o\",\"placeholder\":\"请输入短信验证码\"},model:{value:(_vm.user.code),callback:function ($$v) {_vm.$set(_vm.user, \"code\", $$v)},expression:\"user.code\"}},[(_vm.phoneCode)?_c('van-count-down',{attrs:{\"slot\":\"button\",\"time\":1000 * 60,\"format\":\"ss s\"},on:{\"finish\":function($event){_vm.phoneCode=false}},slot:\"button\"}):_c('van-button',{attrs:{\"slot\":\"button\",\"size\":\"small\",\"round\":\"\",\"type\":\"primary\"},on:{\"click\":_vm.onclick},slot:\"button\"},[_vm._v(\"发送验证码\")])],1)],1)],1),_c('div',{staticClass:\"butlogindiv\"},[_c('van-button',{staticClass:\"butlogin\",attrs:{\"type\":\"info\"},on:{\"click\":_vm.register}},[_vm._v(\"登录\")])],1),_vm._m(0),_vm._m(1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"img\"},[_c('img',{attrs:{\"src\":require(\"../../assets/2020-01-08_195351.png\"),\"alt\":\"\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"微信关注公众号:楠欲上青天\"),_c('span',[_vm._v(\"有惊喜\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login\">\n    <van-nav-bar title=\"登录/注册\">\n      <van-icon name=\"cross\"  @click=\"$router.push('/')\" slot=\"left\"/>\n    </van-nav-bar>\n    <ValidationObserver ref=\"form\">\n      <ValidationProvider name=\"手机号\" rules=\"required|mobile\" immediate>\n      <van-field v-model=\"user.mobile\" clearable left-icon=\"graphic\" placeholder=\"请输入手机号\"></van-field>\n      </ValidationProvider>\n      <ValidationProvider name=\"验证码\" rules=\"required|code\" immediate>\n      <van-field v-model=\"user.code\" center left-icon='smile-comment-o' placeholder=\"请输入短信验证码\">\n      <van-count-down v-if=\"phoneCode\" @finish='phoneCode=false' slot=\"button\" :time=\"1000 * 60\" format=\"ss s\"/>\n      <van-button v-else @click=\"onclick\" slot=\"button\" size=\"small\" round type=\"primary\">发送验证码</van-button>\n      </van-field>\n      </ValidationProvider>\n    </ValidationObserver>\n    <div class=\"butlogindiv\">\n      <van-button class=\"butlogin\" @click=\"register\" type=\"info\">登录</van-button>\n    </div>\n    <div class=\"img\">\n      <img src=\"../../assets/2020-01-08_195351.png\" alt=\"\">\n    </div>\n    <p>微信关注公众号:楠欲上青天<span>有惊喜</span></p>\n  </div>\n</template>\n\n<script>\nimport { login, gaincode } from '@/api/user.js'\nimport { validate } from 'vee-validate'\nexport default {\n  name: 'LoginPage',\n  components: {},\n  props: {},\n  data () {\n    return {\n      user: {\n        mobile: '', // 手机号\n        code: ''// 短信验证码\n      },\n      phoneCode: false\n    }\n  },\n  computed: {},\n  watch: {},\n  created () {},\n  methods: {\n    async register () { // 验证手机号及验证码\n      const succeed = await this.$refs.form.validate()\n      // console.log(succeed)\n      if (!succeed) {\n        const errors = this.$refs.form.errors\n        for (let key in errors) {\n          const tiem = errors[key]\n          // console.log(tiem)\n          if (tiem[0]) {\n            this.$toast(tiem[0])\n            return\n          }\n        }\n      }\n      this.$toast.loading({\n        duration: 0, // 持续时间，0表示持续展示不停止\n        forbidClick: true, // 是否禁止背景点击\n        message: '登录中...' // 提示消息\n      })\n      try {\n        const res = await login(this.user)// 登录\n        // console.log(res)\n        this.$store.commit('settoken', res.data.data)\n        this.$toast.success('登录成功')\n        this.$router.push('/')\n      } catch (err) {\n        // console.log('登录失败', err)\n        this.$toast.fail('登录失败')\n      }\n    },\n    async onclick () {\n      try {\n        const { mobile } = this.user\n        const verification = await validate(mobile, 'required|mobile', {\n          name: '手机号'\n        })// 验证手机号\n        // console.log(verification.valid)\n        if (!verification.valid) {\n          this.$toast(verification.errors[0])\n          return\n        }\n        this.phoneCode = true\n        await gaincode(mobile)// 验证码\n        this.$toast.success('获取成功,请等候')\n      } catch (err) {\n        // console.log('获取失败', err)\n        this.phoneCode = false\n        if (err.response.status === 429) {\n          this.$toast('请勿频繁发送')\n          return\n        }\n        this.$toast('发送失败')\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.butlogindiv{\n  padding: 20px;\n  .butlogin{\n  background-color: #6DB4FA;\n  font-size: 15px;\n  height:44px;\n  width: 100%;\n}\n}\n.img{\n  width: 100%;\n  padding-top:130px;\n  img{\n    width: 100%;\n    // height: 100%;\n  }\n}\np{\n  margin-top: 80px;\n  text-align: center;\n  font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;\n  font-size: 14px;\n  color: #666;\n  span{\n    color:tomato;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=34f594d4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=34f594d4&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34f594d4\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\n\nexport const login = data => {\n  return request({// 点击登录\n    method: 'post',\n    url: '/app/v1_0/authorizations',\n    data\n  })\n}\nexport const gaincode = data => {\n  return request({// 发送短信\n    method: 'get',\n    url: `/app/v1_0/sms/codes/${data}`\n  })\n}\nexport const getUserInfo = () => {\n  return request({ // 获取个人信息\n    method: 'GET',\n    url: '/app/v1_0/user'\n  })\n}\nexport const getuserId = (userId) => {\n  return request({ // 获取用户信息\n    url: `/app/v1_0/users/${userId}`,\n    method: 'get'\n  })\n}\nexport const addFollow = userId => { // 添加关注\n  return request({\n    method: 'POST',\n    url: '/app/v1_0/user/followings',\n    data: {\n      target: userId\n    }\n  })\n}\n\nexport const deleteFollow = userId => { // 取消关注\n  return request({\n    method: 'DELETE',\n    url: `/app/v1_0/user/followings/${userId}`\n  })\n}\n// 获取用户资料\nexport const getUserProfile = () => {\n  return request({\n    method: 'GET',\n    url: '/app/v1_0/user/profile'\n  })\n}\n// 获取用户资料\nexport const updateUserPhoto = data => {\n  return request({\n    method: 'PATCH',\n    url: '/app/v1_0/user/photo',\n    data\n  })\n}\n// 更新用户资料\nexport const updateUserProfile = data => {\n  return request({\n    method: 'PATCH',\n    url: '/app/v1_0/user/profile',\n    data\n  })\n}\n","module.exports = __webpack_public_path__ + \"img/2020-01-08_195351.3a3a8a6f.png\";"],"sourceRoot":""}